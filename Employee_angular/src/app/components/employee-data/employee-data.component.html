<!-- Add Bootstrap & Icons (include in index.html or main layout once) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap CSS CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<div class="admin-dashboard d-flex">
    <!-- Sidebar -->
    <aside class="modern-sidebar">
        <div class="sidebar-brand mb-4">
            <h2 class="brand-text">Admin <span class="dot">‚óè</span></h2>
        </div>
        <nav class="nav flex-column sidebar-nav">
            <a routerLink="/admindash" routerLinkActive="active" class="nav-link">
                <i class="bi bi-house-door me-2"></i> Dashboard
            </a>
            <a routerLink="/employeeData" routerLinkActive="active" class="nav-link">
                <i class="bi bi-people me-2"></i> Users
            </a>
            <a routerLink="/reports" routerLinkActive="active" class="nav-link">
                <i class="bi bi-bar-chart-line me-2"></i> Reports
            </a>
            <a (click)="logout()" class="nav-link logout">
                <i class="bi bi-box-arrow-right me-2"></i> Logout
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content flex-grow-1 p-4 bg-light">
        <!-- Header Section -->
        <header class="main-header bg-white p-4 rounded shadow-sm mb-4">
            <div
                class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3">
                <div>
                    <h1 class="h3 text-primary fw-semibold mb-1">Employee Entries</h1>
                    <p class="text-muted mb-0">
                        A dynamic employee table to <strong>add</strong>, <strong>view</strong>, <strong>edit</strong>,
                        <strong>delete</strong>,
                        <strong>search</strong>, <strong>filter</strong>, and <strong>export</strong> employee records
                        efficiently.
                    </p>
                </div>
                <!-- Add Employee Button (Optional, uncomment if needed) -->

                <button type="button" class="btn btn-primary rounded-pill px-4 py-2" data-bs-toggle="modal"
                    data-bs-target="#modernUserModal" class="btn btn-outline-success shadow-sm px-3 py-2">
                    <i class="bi bi-person-plus-fill me-2"></i> Add Employee
                </button>

            </div>
        </header>


        <!-- Add Employee -->
        <!-- Modal -->
        <div class="modal fade" id="modernUserModal" tabindex="-1" aria-labelledby="modernUserModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content rounded-4 shadow-lg border-0">
                    <div class="modal-header bg-gradient text-white rounded-top-4"
                        style="background: linear-gradient(90deg, #0d6efd, #0dcaf0);">
                        <h5 class="modal-title text-dark" id="modernUserModalLabel">
                            <i class="bi bi-person-lines-fill me-2"></i> New Employee Registration
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>

                    <!-- ‚úÖ Reactive Form Starts -->
                    <form [formGroup]="regis" (ngSubmit)="registerData()">
                        <div class="modal-body px-4 py-3">
                            <div class="mb-3">
                                <label for="userName" class="form-label fw-semibold">Full Name</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="bi bi-person"></i></span>
                                    <input type="text" class="form-control rounded-end-pill" id="userName"
                                        formControlName="name" placeholder="Enter your name">
                                </div>
                                <span *ngIf="regis.get('name')?.touched && regis.get('name')?.invalid"
                                    class="text-danger">Invalid Name</span>
                            </div>

                            <div class="mb-3">
                                <label for="userEmail" class="form-label fw-semibold">Email Address</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="bi bi-envelope-at"></i></span>
                                    <input type="email" class="form-control rounded-end-pill" id="userEmail"
                                        formControlName="email" placeholder="Enter your email">
                                </div>
                                <span *ngIf="regis.get('email')?.touched && regis.get('email')?.invalid"
                                    class="text-danger">Invalid Email</span>
                            </div>

                            <div class="mb-3">
                                <label for="userPassword" class="form-label fw-semibold">Password</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light"><i class="bi bi-lock-fill"></i></span>
                                    <input type="password" class="form-control rounded-end-pill" id="userPassword"
                                        formControlName="password" placeholder="Create a password">
                                </div>
                                <span *ngIf="regis.get('password')?.touched && regis.get('password')?.invalid"
                                    class="text-danger">Invalid Password</span>
                            </div>

                            <p *ngIf="message" [style.color]="messageColor" class="text-center mt-2">{{ message }}</p>
                        </div>

                        <div class="modal-footer px-4 py-3">
                            <button type="button" class="btn btn-outline-secondary rounded-pill"
                                data-bs-dismiss="modal">
                                <i class="bi bi-x-circle me-1"></i> Cancel
                            </button>
                            <button type="submit" class="btn btn-success rounded-pill">
                                <i class="bi bi-check-circle me-1"></i> Submit
                            </button>
                        </div>
                    </form>
                    <!-- ‚úÖ Reactive Form Ends -->

                </div>
            </div>
        </div>




        <!-- Cards Section (Optional, uncomment if needed) -->
        <!--
        <section class="cards mb-4">
            <div class="card">
                <h3>Total Users</h3>
                <p>1,235</p>
            </div>
            <div class="card">
                <h3>New Signups</h3>
                <p>58</p>
            </div>
            <div class="card">
                <h3>Active Sessions</h3>
                <p>91</p>
            </div>
        </section>
        -->

        <!-- Employee Table Section -->
        <div class="container-fluid">
            <div class="table-responsive shadow rounded bg-white p-3">
                <table class="table table-hover table-striped table-bordered align-middle">
                    <thead class="table-dark text-center">
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Name</th>
                            <th scope="col">Email</th>
                            <th scope="col">Password</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="text-center">
                        <tr *ngFor="let emp of employees">
                            <td>{{emp.id}}</td>
                            <td>{{emp.name}}</td>
                            <!-- <td>{{emp.name | uppercase}}</td> -->
                            <td>{{emp.email}}</td>
                            <!-- <td>{{emp.password | maskPassword}}</td> -->
                            <td>{{emp.password}}</td>
                            <td>
                                <button class="btn btn-outline-success me-1" data-bs-toggle="modal"
                                    data-bs-target="#updateModal" (click)="openUpdateModal(emp)">
                                    <i class="bi bi-pencil"></i> Edit
                                </button>
                                <!-- <button class="btn btn-sm btn-danger" (click)="confirmDelete(emp.id)"
                                    data-bs-toggle="modal" data-bs-target="#deleteModal">
                                    <i class="bi bi-trash"></i> Delete
                                </button> -->
                                <button class="btn btn-outline-danger" (click)="confirmDelete(emp.id)">
                                    Delete
                                </button>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Delete Data -->
        <!-- <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content shadow-lg rounded-4">
                    <div class="modal-header text-white rounded-top-4"
                        style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                        <h5 class="modal-title fw-semibold" id="deleteModalLabel">Confirm Deletion</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>

                    <div class="modal-body text-center">
                        <i class="bi bi-exclamation-circle text-warning display-4 mb-3"></i>
                        <p class="fs-5 fw-medium text-secondary mb-1">
                            Are you sure you want to delete this employee?
                        </p>
                        <p class="text-muted small">This action cannot be undone.</p>
                    </div>

                    <div class="modal-footer border-0">
                        <button type="button" class="btn btn-outline-secondary px-4"
                            data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-outline-primary px-4" (click)="confirmDelete()">Yes,
                            Delete</button>
                    </div>

                    <div *ngIf="deleteMessage" class="mx-4 mb-2">
                        <div [ngClass]="messageColor"
                            class="alert alert-dismissible fade show py-2 px-3 text-center shadow-sm" role="alert">
                            {{ deleteMessage }}
                        </div>
                    </div>

                </div>
            </div>
        </div> -->



        <!-- Update Modal -->
        <div class="modal fade" id="updateModal" tabindex="-1" aria-labelledby="updateModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content custom-modal">
                    <div class="modal-header">
                        <h5 class="modal-title" id="updateModalLabel">Update Information</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <form [formGroup]="updateForm">
                            <!-- üëá ID field (readonly) -->
                            <div class="mb-3">
                                <label for="idInput" class="form-label">ID</label>
                                <input type="text" formControlName="id" class="form-control" id="idInput" readonly>
                            </div>

                            <div class="mb-3">
                                <label for="nameInput" class="form-label">Full Name</label>
                                <input type="text" formControlName="name" class="form-control" id="nameInput" />
                            </div>

                            <div class="mb-3">
                                <label for="emailInput" class="form-label">Email address</label>
                                <input type="email" formControlName="email" class="form-control" id="emailInput" />
                            </div>

                            <div class="mb-3">
                                <label for="passwordInput" class="form-label">Password</label>
                                <input type="password" formControlName="password" class="form-control"
                                    id="passwordInput" />
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                            aria-label="Close" (click)="refreshPage()">Back</button>

                        <button type="button" class="btn btn-success" (click)="submitUpdate()">{{ updateMessage ?
                            'Updating...' : 'Update' }}</button>
                    </div>

                    <div *ngIf="updateMessage" class="mt-3">
                        <div class="alert" [ngClass]="messageColor" role="alert">
                            {{ updateMessage }}
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <!-- Bootstrap JS Bundle CDN (Includes Popper) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>






















    </main>


    <!-- Update Code -->

</div>